from .llm import llm

def make_cover(resume: str, jd: str):
    system = (
        "Ты копирайтер по карьерным письмам. Всегда отвечай НА РУССКОМ ЯЗЫКЕ. "
        "Тон: профессиональный и дружелюбный. 170–220 слов. Без воды и штампов."
    )
    prompt = f"""Сгенерируй сопроводительное письмо под вакансию на РУССКОМ.
Требования:
- 170–220 слов.
- Сошлись на 3–4 конкретных совпадения с JD.
- Приведи 1 кейс из резюме с результатом.
- НЕ используй знак % и слова "процент/процентов". Вместо этого пиши абсолютные числа, сроки, масштабы
  (например: "ускорил сбор данных в 1.5 раза", "сократил время на 3 часа", "обработал 2 млн строк"),
  либо качественные формулировки без процентов.
- Не используй квадратные скобки и плейсхолдеры. Текст цельный, без подзаголовков.

Резюме:
{resume}

Вакансия (JD):
{jd}

Структура письма:
1) Короткое вступление: мотивация + 1–2 совпадения с JD.
2) Абзац с кейсом из опыта и измеримым результатом (без процентов).
3) Почему подойду компании + готовность обсудить детали.
"""
    return llm(system, prompt, max_tokens=700)
